<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="draw.io" version="22.0.0">
  <diagram name="alwaysブロックの使い分け" id="ch05_always_blocks">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <!-- Title -->
        <mxCell id="2" value="always ブロックの使い分け" style="text;html=1;fontSize=20;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="400" height="40" as="geometry"/>
        </mxCell>
        <!-- Start: Decision -->
        <mxCell id="3" value="何を記述するか？" style="rhombus;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="90" width="220" height="100" as="geometry"/>
        </mxCell>
        <!-- Branch 1: Combinational -->
        <mxCell id="4" value="組み合わせ回路" style="text;html=1;fontSize=13;fontStyle=1;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="150" y="120" width="130" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="5" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#2E7D32;" edge="1" source="3" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="6" value="always_comb" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=18;fontStyle=1;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="100" y="220" width="240" height="60" as="geometry"/>
        </mxCell>
        <!-- Branch 2: FF -->
        <mxCell id="7" value="FF（クロック同期）" style="text;html=1;fontSize=13;fontStyle=1;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="490" y="210" width="150" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="8" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#1565C0;" edge="1" source="3" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="always_ff" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=18;fontStyle=1;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="440" y="250" width="240" height="60" as="geometry"/>
        </mxCell>
        <!-- Branch 3: Latch -->
        <mxCell id="10" value="ラッチ" style="text;html=1;fontSize=13;fontStyle=1;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="820" y="120" width="80" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="11" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#C62828;" edge="1" source="3" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="900" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="12" value="always_latch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=18;fontStyle=1;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="770" y="220" width="240" height="60" as="geometry"/>
        </mxCell>
        <!-- Details for always_comb -->
        <mxCell id="13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#82b366;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="310" width="340" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#2E7D32;" edge="1" source="6" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="310" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="15" value="&lt;font face=&quot;Courier New&quot; size=&quot;2&quot;&gt;always_comb begin&lt;br&gt;  y = a &amp;amp; b;  // ブロッキング代入&lt;br&gt;end&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#82b366;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="325" width="300" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="16" value="✓ 自動感度リスト&#xa;✓ ブロッキング代入(=)を使用&#xa;✓ ラッチ推論で警告&#xa;✓ 全入力の変化で再評価" style="text;html=1;fontSize=12;align=left;verticalAlign=top;fillColor=#FFFFFF;strokeColor=#A5D6A7;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="400" width="300" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="17" value="⚠ 注意: 全分岐で代入しないと&#xa;   ラッチが推論される" style="text;html=1;fontSize=11;align=left;fontColor=#E65100;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="70" y="490" width="300" height="40" as="geometry"/>
        </mxCell>
        <!-- Details for always_ff -->
        <mxCell id="18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#6c8ebf;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="340" width="340" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="19" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#1565C0;" edge="1" source="9" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="340" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="20" value="&lt;font face=&quot;Courier New&quot; size=&quot;2&quot;&gt;always_ff @(posedge clk) begin&lt;br&gt;  q &amp;lt;= d;  // ノンブロッキング代入&lt;br&gt;end&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#6c8ebf;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="355" width="300" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="21" value="✓ クロックエッジで動作&#xa;✓ ノンブロッキング代入(&lt;=)を使用&#xa;✓ FF/レジスタを推論&#xa;✓ リセット記述も可能" style="text;html=1;fontSize=12;align=left;verticalAlign=top;fillColor=#FFFFFF;strokeColor=#90CAF9;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="430" width="300" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="22" value="⚠ 注意: 感度リストにはクロック/&#xa;   リセットのみ記述" style="text;html=1;fontSize=11;align=left;fontColor=#E65100;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="520" width="300" height="40" as="geometry"/>
        </mxCell>
        <!-- Details for always_latch -->
        <mxCell id="23" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FBE9E7;strokeColor=#b85450;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="310" width="340" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="24" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#C62828;" edge="1" source="12" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="890" y="310" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="25" value="&lt;font face=&quot;Courier New&quot; size=&quot;2&quot;&gt;always_latch begin&lt;br&gt;  if (en) q = d;  // イネーブル付き&lt;br&gt;end&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#b85450;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="780" y="325" width="300" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="26" value="✓ レベルセンシティブ&#xa;✓ ブロッキング代入(=)を使用&#xa;✓ ラッチを明示的に推論&#xa;✓ 意図的なラッチ記述用" style="text;html=1;fontSize=12;align=left;verticalAlign=top;fillColor=#FFFFFF;strokeColor=#EF9A9A;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="400" width="300" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="27" value="⚠ 注意: FPGAでは通常&#xa;   ラッチの使用は非推奨" style="text;html=1;fontSize=11;align=left;fontColor=#E65100;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="780" y="490" width="300" height="40" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
