<mxfile host="app.diagrams.net" modified="2026-02-16" type="device">
  <diagram id="ch15_vpi_obj" name="VPIオブジェクトモデル">
    <mxGraphModel dx="1200" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- タイトル -->
        <mxCell id="2" value="VPIオブジェクトモデル（VPI Object Model）" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=18;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="500" height="40" as="geometry" />
        </mxCell>

        <!-- ========== Root: vpiModule ========== -->
        <mxCell id="10" value="&lt;b&gt;vpiModule&lt;/b&gt;&lt;br&gt;（モジュールオブジェクト）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="80" width="240" height="60" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiPort ========== -->
        <mxCell id="20" value="&lt;b&gt;vpiPort&lt;/b&gt;&lt;br&gt;ポート" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiNet ========== -->
        <mxCell id="21" value="&lt;b&gt;vpiNet&lt;/b&gt;&lt;br&gt;ネット" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiReg ========== -->
        <mxCell id="22" value="&lt;b&gt;vpiReg&lt;/b&gt;&lt;br&gt;レジスタ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiParameter ========== -->
        <mxCell id="23" value="&lt;b&gt;vpiParameter&lt;/b&gt;&lt;br&gt;パラメータ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="590" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiTask ========== -->
        <mxCell id="24" value="&lt;b&gt;vpiTask&lt;/b&gt;&lt;br&gt;タスク" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Children: vpiFunction ========== -->
        <mxCell id="25" value="&lt;b&gt;vpiFunction&lt;/b&gt;&lt;br&gt;関数" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="930" y="230" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Sub-child: vpiInternalScope ========== -->
        <mxCell id="30" value="&lt;b&gt;vpiInternalScope&lt;/b&gt;&lt;br&gt;内部スコープ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="370" width="160" height="50" as="geometry" />
        </mxCell>

        <!-- Sub-child: vpiModule (子モジュール) -->
        <mxCell id="31" value="&lt;b&gt;vpiModule&lt;/b&gt;&lt;br&gt;子モジュール" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="370" width="160" height="50" as="geometry" />
        </mxCell>

        <!-- ========== Arrows: vpiModule → children (1対多: dashed) ========== -->
        <!-- Module → Port -->
        <mxCell id="40" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="20" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Module → Net -->
        <mxCell id="41" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="21" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Module → Reg -->
        <mxCell id="42" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="22" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Module → Parameter -->
        <mxCell id="43" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="23" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Module → Task -->
        <mxCell id="44" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="24" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Module → Function -->
        <mxCell id="45" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="25" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Module → InternalScope (1対多) -->
        <mxCell id="46" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="30" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="550" y="330" />
              <mxPoint x="510" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Module → 子Module (1対多) -->
        <mxCell id="47" value="*" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#333333;endArrow=classic;dashed=1;fontSize=11;fontStyle=1;" edge="1" source="10" target="31" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="550" y="330" />
              <mxPoint x="710" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ========== API注釈 ========== -->
        <mxCell id="50" value="&lt;b&gt;vpi_iterate()&lt;/b&gt;&lt;br&gt;オブジェクトの反復走査" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="150" width="180" height="45" as="geometry" />
        </mxCell>
        <mxCell id="51" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=1;strokeColor=#666666;endArrow=open;dashed=1;endFill=0;" edge="1" source="50" target="40" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="200" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="52" value="&lt;b&gt;vpi_handle()&lt;/b&gt;&lt;br&gt;単一オブジェクトへのアクセス" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="830" y="150" width="200" height="45" as="geometry" />
        </mxCell>

        <!-- ========== 凡例 ========== -->
        <mxCell id="60" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#CCCCCC;" vertex="1" parent="1">
          <mxGeometry x="80" y="470" width="520" height="130" as="geometry" />
        </mxCell>
        <mxCell id="61" value="&lt;b&gt;凡例&lt;/b&gt;" style="text;html=1;align=center;fontSize=14;fontColor=#333333;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="475" width="100" height="25" as="geometry" />
        </mxCell>

        <!-- 1対多の矢印例 -->
        <mxCell id="62" value="" style="endArrow=classic;dashed=1;strokeWidth=2;strokeColor=#333333;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="110" y="520" as="sourcePoint" />
            <mxPoint x="210" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="63" value="1対多（vpi_iterate で走査）" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="220" y="510" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- 1対1の矢印例 -->
        <mxCell id="64" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#333333;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="110" y="550" as="sourcePoint" />
            <mxPoint x="210" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="65" value="1対1（vpi_handle で取得）" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="220" y="540" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- vpiHandle注釈 -->
        <mxCell id="66" value="&lt;b&gt;vpiHandle&lt;/b&gt;: すべてのオブジェクトの統一ハンドル&lt;br&gt;VPI関数群は vpiHandle を介してオブジェクトにアクセスする" style="text;html=1;align=left;fontSize=11;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="570" width="480" height="30" as="geometry" />
        </mxCell>

        <!-- ========== 色凡例 ========== -->
        <mxCell id="70" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#CCCCCC;" vertex="1" parent="1">
          <mxGeometry x="640" y="470" width="420" height="130" as="geometry" />
        </mxCell>
        <mxCell id="71" value="&lt;b&gt;オブジェクト種別&lt;/b&gt;" style="text;html=1;align=center;fontSize=14;fontColor=#333333;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="475" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="72" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="660" y="510" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="73" value="モジュール / スコープ" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="690" y="505" width="150" height="25" as="geometry" />
        </mxCell>
        <mxCell id="74" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="660" y="535" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="75" value="ポート" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="690" y="530" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="76" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="660" y="560" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="77" value="ネット / レジスタ" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="690" y="555" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="78" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="870" y="510" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="79" value="パラメータ" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="900" y="505" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="80" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="870" y="535" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="81" value="タスク / 関数" style="text;html=1;align=left;fontSize=11;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="900" y="530" width="100" height="25" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
