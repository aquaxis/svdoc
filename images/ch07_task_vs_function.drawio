<mxfile host="app.diagrams.net" modified="2026-02-15" agent="draw.io" type="device">
  <diagram id="ch07_task_vs_function" name="taskとfunctionの違い比較図">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <!-- タイトル -->
        <mxCell id="2" value="task vs function — 比較図" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="350" height="40" as="geometry" />
        </mxCell>

        <!-- ========== Task セクション ========== -->
        <mxCell id="3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="520" height="480" as="geometry" />
        </mxCell>
        <mxCell id="4" value="&lt;b&gt;task&lt;/b&gt;" style="text;html=1;fontSize=22;fontStyle=1;align=center;fontColor=#1a5276;" vertex="1" parent="1">
          <mxGeometry x="220" y="90" width="100" height="35" as="geometry" />
        </mxCell>

        <!-- task特徴 -->
        <mxCell id="5" value="&lt;b&gt;時間消費あり&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="140" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6" value="&lt;b&gt;遅延・イベント制御可能&lt;/b&gt;&lt;br&gt;&lt;font face=&quot;monospace&quot; size=&quot;1&quot;&gt;#10, @(posedge clk), wait()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="195" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7" value="&lt;b&gt;戻り値なし&lt;/b&gt;&lt;br&gt;（output引数で値を返す）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="260" width="240" height="45" as="geometry" />
        </mxCell>
        <mxCell id="8" value="&lt;b&gt;他のtask/functionを呼べる&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="240" height="40" as="geometry" />
        </mxCell>

        <!-- taskコード例 -->
        <mxCell id="9" value="&lt;b&gt;コード例:&lt;/b&gt;" style="text;html=1;align=left;fontSize=11;fontColor=#1a5276;" vertex="1" parent="1">
          <mxGeometry x="80" y="375" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="10" value="&lt;pre style=&quot;margin:4px;font-size:11px;&quot;&gt;task automatic drive_bus;&#xa;  input  [7:0] addr;&#xa;  input  [7:0] data;&#xa;  output       done;&#xa;  @(posedge clk);&#xa;  bus_addr &lt;= addr;&#xa;  bus_data &lt;= data;&#xa;  #10;&#xa;  done = 1;&#xa;endtask&lt;/pre&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#999999;align=left;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="395" width="280" height="155" as="geometry" />
        </mxCell>

        <!-- task用途 -->
        <mxCell id="11" value="&lt;b&gt;主な用途:&lt;/b&gt; テストベンチ、バスドライバ、プロトコル制御" style="text;html=1;align=center;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="60" y="560" width="360" height="30" as="geometry" />
        </mxCell>

        <!-- ========== Function セクション ========== -->
        <mxCell id="20" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="620" y="80" width="520" height="480" as="geometry" />
        </mxCell>
        <mxCell id="21" value="&lt;b&gt;function&lt;/b&gt;" style="text;html=1;fontSize=22;fontStyle=1;align=center;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="800" y="90" width="130" height="35" as="geometry" />
        </mxCell>

        <!-- function特徴 -->
        <mxCell id="22" value="&lt;b&gt;時間消費なし（ゼロタイム）&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="140" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="23" value="&lt;b&gt;遅延・イベント制御不可&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;✘ #10, @(posedge clk) は使用不可&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="660" y="195" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="24" value="&lt;b&gt;戻り値あり&lt;/b&gt;&lt;br&gt;（関数名 = 戻り値 or return文）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="660" y="260" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="25" value="&lt;b&gt;functionのみ呼べる&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#cc0000&quot;&gt;✘ taskの呼び出し不可&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="660" y="320" width="280" height="40" as="geometry" />
        </mxCell>

        <!-- functionコード例 -->
        <mxCell id="26" value="&lt;b&gt;コード例:&lt;/b&gt;" style="text;html=1;align=left;fontSize=11;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="660" y="375" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="27" value="&lt;pre style=&quot;margin:4px;font-size:11px;&quot;&gt;function automatic logic [7:0] add;&#xa;  input [7:0] a;&#xa;  input [7:0] b;&#xa;  return a + b;&#xa;endfunction&#xa;&#xa;// 式の中で使用可能&#xa;result = add(x, y);&lt;/pre&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#999999;align=left;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="660" y="395" width="280" height="155" as="geometry" />
        </mxCell>

        <!-- function用途 -->
        <mxCell id="28" value="&lt;b&gt;主な用途:&lt;/b&gt; 計算、データ変換、合成可能ロジック" style="text;html=1;align=center;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="640" y="560" width="350" height="30" as="geometry" />
        </mxCell>

        <!-- ========== 中央の比較テーブル ========== -->
        <mxCell id="40" value="&lt;b&gt;比較サマリ&lt;/b&gt;" style="text;html=1;align=center;fontSize=14;fontColor=#333333;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="620" width="350" height="25" as="geometry" />
        </mxCell>
        <!-- テーブルヘッダ -->
        <mxCell id="41" value="&lt;b&gt;項目&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#333333;fontColor=#FFFFFF;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="250" y="650" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="42" value="&lt;b&gt;task&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6c8ebf;fontColor=#FFFFFF;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="650" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="43" value="&lt;b&gt;function&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#82b366;fontColor=#FFFFFF;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="610" y="650" width="200" height="30" as="geometry" />
        </mxCell>
        <!-- 行1 -->
        <mxCell id="44" value="時間消費" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="250" y="680" width="160" height="28" as="geometry" />
        </mxCell>
        <mxCell id="45" value="あり" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="680" width="200" height="28" as="geometry" />
        </mxCell>
        <mxCell id="46" value="なし（ゼロタイム）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="610" y="680" width="200" height="28" as="geometry" />
        </mxCell>
        <!-- 行2 -->
        <mxCell id="47" value="戻り値" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="250" y="708" width="160" height="28" as="geometry" />
        </mxCell>
        <mxCell id="48" value="なし（output引数）" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="708" width="200" height="28" as="geometry" />
        </mxCell>
        <mxCell id="49" value="あり" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="610" y="708" width="200" height="28" as="geometry" />
        </mxCell>
        <!-- 行3 -->
        <mxCell id="50" value="合成可能性" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="250" y="736" width="160" height="28" as="geometry" />
        </mxCell>
        <mxCell id="51" value="制限あり" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="736" width="200" height="28" as="geometry" />
        </mxCell>
        <mxCell id="52" value="合成可能" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="610" y="736" width="200" height="28" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
