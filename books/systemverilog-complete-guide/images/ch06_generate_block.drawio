<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="draw.io" version="22.0.0">
  <diagram name="generate文による条件付きインスタンス化" id="ch06_generate_block">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1500" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <!-- Title -->
        <mxCell id="2" value="generate文による条件付きインスタンス化" style="text;html=1;fontSize=20;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="500" height="40" as="geometry"/>
        </mxCell>
        <!-- generate for Section -->
        <mxCell id="3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="80" width="660" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="4" value="generate for ─ 繰り返しインスタンス化" style="text;html=1;fontSize=16;fontStyle=1;align=center;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="100" y="90" width="500" height="30" as="geometry"/>
        </mxCell>
        <!-- Code for generate for -->
        <mxCell id="5" value="&lt;font face=&quot;Courier New&quot;&gt;genvar i;&lt;br&gt;generate&lt;br&gt;  for (i = 0; i &amp;lt; 4; i++) begin : gen_blk&lt;br&gt;    adder u_adder (&lt;br&gt;      .a(data_in[i]),&lt;br&gt;      .b(offset[i]),&lt;br&gt;      .sum(data_out[i])&lt;br&gt;    );&lt;br&gt;  end&lt;br&gt;endgenerate&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1565C0;fontSize=12;align=left;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="50" y="130" width="300" height="190" as="geometry"/>
        </mxCell>
        <!-- Generated instances visualization -->
        <mxCell id="6" value="展開結果" style="text;html=1;fontSize=13;fontStyle=1;align=center;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="430" y="130" width="100" height="25" as="geometry"/>
        </mxCell>
        <!-- genvar i arrow -->
        <mxCell id="7" value="genvar i" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#1565C0;dashed=1;fontSize=12;fontStyle=1;fontColor=#1565C0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="360" y="225" as="sourcePoint"/>
            <mxPoint x="400" y="225" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <!-- Instance 0 -->
        <mxCell id="8" value="adder&#xa;u_adder[0]" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="160" width="120" height="45" as="geometry"/>
        </mxCell>
        <!-- Instance 1 -->
        <mxCell id="9" value="adder&#xa;u_adder[1]" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="215" width="120" height="45" as="geometry"/>
        </mxCell>
        <!-- Instance 2 -->
        <mxCell id="10" value="adder&#xa;u_adder[2]" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="270" width="120" height="45" as="geometry"/>
        </mxCell>
        <!-- Instance 3 -->
        <mxCell id="11" value="adder&#xa;u_adder[3]" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="325" width="120" height="45" as="geometry"/>
        </mxCell>
        <!-- Inputs/Outputs for instances -->
        <mxCell id="12" value="data_in[0]" style="text;fontSize=10;align=right;" vertex="1" parent="1">
          <mxGeometry x="545" y="160" width="70" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="13" value="data_in[1]" style="text;fontSize=10;align=right;" vertex="1" parent="1">
          <mxGeometry x="545" y="215" width="70" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="14" value="data_in[2]" style="text;fontSize=10;align=right;" vertex="1" parent="1">
          <mxGeometry x="545" y="270" width="70" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="15" value="data_in[3]" style="text;fontSize=10;align=right;" vertex="1" parent="1">
          <mxGeometry x="545" y="325" width="70" height="15" as="geometry"/>
        </mxCell>
        <!-- Brace for loop -->
        <mxCell id="16" value="i = 0..3" style="text;html=1;fontSize=12;fontStyle=2;align=center;fontColor=#1565C0;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="555" y="250" width="80" height="20" as="geometry"/>
        </mxCell>
        <!-- Note for generate for -->
        <mxCell id="17" value="• コンパイル時に展開される&#xa;• 各インスタンスは独立した回路&#xa;• genvar はエラボレーション時の変数" style="text;html=1;fontSize=11;align=left;fillColor=#E3F2FD;strokeColor=#90CAF9;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="380" width="300" height="60" as="geometry"/>
        </mxCell>
        <!-- generate if Section -->
        <mxCell id="18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="80" width="530" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="19" value="generate if ─ 条件付きインスタンス化" style="text;html=1;fontSize=16;fontStyle=1;align=center;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="780" y="90" width="400" height="30" as="geometry"/>
        </mxCell>
        <!-- Code for generate if -->
        <mxCell id="20" value="&lt;font face=&quot;Courier New&quot;&gt;parameter USE_FAST = 1;&lt;br&gt;generate&lt;br&gt;  if (USE_FAST) begin : gen_fast&lt;br&gt;    fast_adder u_add (...);&lt;br&gt;  end else begin : gen_slow&lt;br&gt;    small_adder u_add (...);&lt;br&gt;  end&lt;br&gt;endgenerate&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#E65100;fontSize=12;align=left;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="740" y="130" width="280" height="160" as="geometry"/>
        </mxCell>
        <!-- Decision diamond -->
        <mxCell id="21" value="USE_FAST&#xa;== 1 ?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#E65100;fontSize=13;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="310" width="120" height="70" as="geometry"/>
        </mxCell>
        <!-- Fast adder -->
        <mxCell id="22" value="fast_adder&#xa;(高速・大面積)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFAB91;strokeColor=#E65100;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="740" y="410" width="130" height="45" as="geometry"/>
        </mxCell>
        <!-- Small adder -->
        <mxCell id="23" value="small_adder&#xa;(低速・小面積)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFAB91;strokeColor=#E65100;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="410" width="130" height="45" as="geometry"/>
        </mxCell>
        <!-- Decision arrows -->
        <mxCell id="24" value="Yes" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#2E7D32;fontSize=12;fontStyle=1;fontColor=#2E7D32;" edge="1" source="21" target="22" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="25" value="No" style="edgeStyle=orthogonalEdgeStyle;strokeWidth=2;strokeColor=#C62828;fontSize=12;fontStyle=1;fontColor=#C62828;" edge="1" source="21" target="23" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <!-- Note for generate if -->
        <mxCell id="26" value="• パラメータ値でモジュール選択&#xa;• コンパイル時に決定（実行時ではない）&#xa;• 条件に合わない方は生成されない" style="text;html=1;fontSize=11;align=left;fillColor=#FFF3E0;strokeColor=#FFCC80;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="300" width="280" height="60" as="geometry"/>
        </mxCell>
        <!-- Bottom summary -->
        <mxCell id="27" value="※ generate文はエラボレーション（コンパイル）時に展開される。実行時の分岐ではない点に注意。" style="text;html=1;fontSize=12;align=center;fontColor=#666;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="250" y="490" width="600" height="30" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
